<script>
    // Inicializar cliente Supabase
    const SUPABASE_URL = "https://awbtsseratdujnjxncii.supabase.co";
    const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF3YnRzc2VyYXRkdWpuanhuY2lpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI0MjIxNDgsImV4cCI6MjA1Nzk5ODE0OH0.SMOziWy5bknJoHjeTceGev233888xhumygRgGisRylY";
    const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    // Função de cadastro
    async function handleSignup(event) {
        event.preventDefault();
        hideMessages();
        setLoading('signup-btn', true);
        
        const nome = document.getElementById('nome').value;
        const telefone = document.getElementById('telefone').value;
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        
        if (password !== confirmPassword) {
            showError('As senhas não conferem');
            setLoading('signup-btn', false);
            return;
        }
        
        try {
            const { data, error } = await supabase.auth.signUp({
                email,
                password,
                options: {
                    data: {
                        full_name: nome,
                        phone: telefone
                    }
                }
            });
            
            if (error) throw error;
            
            showSuccess('Cadastro realizado com sucesso! Verifique seu email para confirmar sua conta.');
            setTimeout(() => {
                window.location.href = 'login-page.html';
            }, 3000);
            
        } catch (error) {
            console.error('Erro no cadastro:', error);
            showError('Erro no cadastro: ' + error.message);
        } finally {
            setLoading('signup-btn', false);
        }
    }
</script> 